(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[430],{4346:function(e,t,n){Promise.resolve().then(n.bind(n,8429))},8429:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return y}});var r=n(7437),a=n(2265),s=n(9671),i=n.n(s),o=n(3149),c=n(3631),l=n(4685),h=n(85),u=n(9473),d=n(4673),p=n(2325),m=n(8797),g=n(7776),x=n(2253);let _="/graphics-interview",f=_+"/knob.glb";function M(e){let{ctrlRef:t,range:n}=e,s=(0,a.useRef)(),i=(0,a.useRef)(),{size:o,viewport:c,gl:l,camera:h,scene:M}=(0,u.A)(),j=o.width/c.width,{nodes:v,materials:y}=(0,d.L)(f),w=(0,u.F)(m.d,_+"/tex/rough.jpeg"),P=(0,u.F)(m.d,_+"/tex/hdr.jpeg"),b=null,I=e=>{let t=l.domElement.getBoundingClientRect(),n=(e.clientX-t.left)/t.width*2-1,r=-((e.clientY-t.top)/t.height*2)+1,a=new g.Raycaster,s=new g.Vector2(n,r);a.setFromCamera(s,h);let i=a.intersectObjects(M.children,!0);i.length>0&&(b=i[0].point)},R=(0,x.c0)(e=>{let{first:r,event:a,movement:[s,o],pos:c=i.current.position,rot:l=i.current.rotation}=e;r&&I(a),new g.Vector2(s-c.x,o-c.y),b.y,b.x;let h=Math.atan2(b.y-o/j,b.x+s/j),u=(h=(h+2*Math.PI)%(2*Math.PI))/(2*Math.PI);u-=u>.75?1:0;let d=-1/n,p=.5>Math.abs((u=d*u+(1-.5*d)/2)-.5);return t.current&&p&&(t.current.volume=Math.max(0,Math.min(1,u)),i.current.rotation.set(l.x,l.y,h)),c});(0,a.useEffect)(()=>{P&&(P.mapping=g.EquirectangularReflectionMapping)},[P]),(0,u.C)((e,t)=>{let n=1*e.clock.getElapsedTime();s.current.rotation.y=.1*Math.PI*Math.sin(n),s.current.rotation.x=.1*Math.PI*Math.cos(n)});let k=new g.MeshStandardMaterial({envMap:P,roughnessMap:w,metalness:1,roughness:.5,color:3158271}),E=new g.MeshStandardMaterial({envMap:P,roughnessMap:w,metalness:.1,roughness:.5,color:0});return(0,r.jsxs)("group",{rotation:[0,0,Math.PI*(1.5+(1-n))],ref:i,...e,dispose:null,...e,...R(),children:[(0,r.jsx)("group",{ref:s,children:Object.keys(v).map((e,t)=>{let n=v[e],a=["ARROW","TOP"].includes(n.name)?k:E;return(0,r.jsx)("mesh",{rotation:[Math.PI/2,0,0],castShadow:!0,receiveShadow:!0,geometry:n.geometry,material:a},e)})}),(0,r.jsxs)(p.V,{as:"div",wrapperClass:"vol",prepend:!0,center:!0,zIndexRange:[-1,0],children:[(0,r.jsx)("div",{className:"title",style:{top:"".concat(-220,"px")},children:"VOLUME"}),(0,r.jsx)("div",{className:"number",children:Array.from({length:11},(e,t)=>{let a=2*Math.PI*(t/10*n+(1-n)/2+.25);return(0,r.jsx)("div",{className:"vol".concat(t),style:{left:"".concat(150*Math.cos(a),"px"),top:"".concat(150*Math.sin(a),"px")},children:t},t)})})]})]})}var j=e=>{let{audioRef:t}=e;return(0,a.useEffect)(()=>{let e=t.current;return e.src="/graphics-interview/track.mp3",e.currentTime=65,e.play().catch(e=>{console.log("Error playing audio:",e)}),()=>{e.pause(),e.src=""}},[]),(0,r.jsx)("div",{children:(0,r.jsxs)("audio",{ref:t,controls:!0,children:["Your browser does not support the ",(0,r.jsx)("code",{children:"audio"})," element."]})})};function v(){let e=(0,a.useRef)();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(j,{audioRef:e}),(0,r.jsxs)(o.Xz,{children:[(0,r.jsx)("ambientLight",{intensity:Math.PI/2}),(0,r.jsx)("spotLight",{position:[10,10,10],angle:.15,penumbra:1,decay:0,intensity:Math.PI}),(0,r.jsx)("pointLight",{position:[-10,-10,-10],decay:0,intensity:Math.PI}),(0,r.jsx)(M,{ctrlRef:e,range:.75}),(0,r.jsxs)(c.x,{children:[(0,r.jsx)(l.d,{intensity:1,luminanceThreshold:0,luminanceSmoothing:.9,height:500}),(0,r.jsx)(h.s,{eskil:!1,offset:.1,darkness:1.1})]})]})]})}v.displayName="VolumeControl";var y=()=>(0,r.jsx)("div",{className:i().main,children:(0,r.jsx)(v,{})})},9671:function(e){e.exports={main:"page_main__GlU4n",center:"page_center__5oHG7",spin:"page_spin__W_8_q",canvas:"page_canvas__dt_l4",marqueeT:"page_marqueeT__fHP76",moveText:"page_moveText__meMx1",marqueeB:"page_marqueeB__dZ3Dl",circle:"page_circle__uHZRA"}}},function(e){e.O(0,[967,689,723,961,675,971,23,744],function(){return e(e.s=4346)}),_N_E=e.O()}]);